### 引言

micro:bit v2能够录音、播放声音，甚至以图表形式展示声音。尽管本项目存在局限——micro:bit拥有的内存只能够记录大约2秒钟的声音，而且通过内置的扬声器播放出来的声音音量不大——本项目示范了数字声音的关键原理。

一个小型的扬声器，比如有时与移动设备一起使用的、便宜的便携式音箱，能够增大音量。

### Recording Sound

下面的脚本在A键按下的时候，录制2秒钟左右的声音。

![sound_record.png](record_cn.png)

该脚本先创建一个用来保存声音的列表。接着把从麦克风采样得到的样本数据存入列表。

[[fact]]
### 把声音转换为数字

声波引发气压发生波动。这些波动或向里或向外挤压你的耳膜（或者麦克风内的隔膜）。尽管振动非常细微，你的耳朵依旧能够感知声波振动，把所听到的东西告诉你的大脑。

一个**声音样本**是一个数字。这个数字对应采样之际麦克风的隔膜承受的气压。整个录音过程就是不断采样的过程。每一次采样将得到一个数字，也即声音样本。**数字声音**是周期性采样得到的声音样本组成的序列。

为了捕捉声音，你必须在一秒钟内对气压采样数千次。我们的脚本在一秒钟内的采样次数大约是10000次。更高的**采样频率**能够提高声音的音质。CD唱片所使用的采样频率是44.1k/秒，而专业的声音工程师经常选用每秒88k，96k，甚至192k次的频率进行录音。
[[/fact]]

### 播放声音

![sound_play.png](playback_cn.png)

按下A键将录制1.5秒左右的声音。录音期间，micro:bit板子上的麦克风形状的灯会亮起来。

按下B键将使用内置的扬声器播放前面录制的声音。声音音量不大，因此你有必要把micro:bit凑到耳边来听。

你可以用一个小音箱来增大音量，比如用下图所示的5美元的[Hamburger Mini Speaker](https://www.sparkfun.com/products/14023)

![hamburgerminispeaker.jpg](hamburgerminispeaker.jpg)

用鳄鱼夹把麦克风连接到0号引脚和GND引脚。把播放声音脚本内的引脚编号从27改为0，以启用外部扬声器来增大音量。

![sound_play.png](playback-pin0-cn.png)

[[note]]
### 电子学小窍门
连接外部扬声器的时候，并联一个大约1-10uF的电容，将消除一部分毛刺。电容就像一个低通过滤器，平滑了micro:bit采集的声音。
[[/note]]

### 为声音绘制图表

下面的脚本将为声音绘制图表：

![graph.png](graph-cn.png)

录制一段声音，然后打开图表窗口，在Microblocks窗口内单击上述脚本，你将在图表窗口内看到波形。

![graph_output.png](graph_output.png)

上述图表显示了麦克风采集的**声音样本**。麦克风把声波转换为电平信号，micro:bit把电平信号转换为数字。录音脚本把这些数字存入列表。把列表内的数字绘制到图表上就产生所录制的声音的可视化表示。

### Complete Project

[recordplayback.ubp](recordplayback-cn.ubp)
